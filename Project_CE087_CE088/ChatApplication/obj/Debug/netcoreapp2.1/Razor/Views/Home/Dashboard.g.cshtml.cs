#pragma checksum "C:\Users\HP\source\repos\Chat\ChatApplication\Views\Home\Dashboard.cshtml" "{ff1816ec-aa5e-4d10-87f7-6f4963833460}" "8f85602f4d333c64577ee9dc478caa775cb0acc6"
// <auto-generated/>
#pragma warning disable 1591
[assembly: global::Microsoft.AspNetCore.Razor.Hosting.RazorCompiledItemAttribute(typeof(AspNetCore.Views_Home_Dashboard), @"mvc.1.0.view", @"/Views/Home/Dashboard.cshtml")]
[assembly:global::Microsoft.AspNetCore.Mvc.Razor.Compilation.RazorViewAttribute(@"/Views/Home/Dashboard.cshtml", typeof(AspNetCore.Views_Home_Dashboard))]
namespace AspNetCore
{
    #line hidden
    using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Threading.Tasks;
    using Microsoft.AspNetCore.Mvc;
    using Microsoft.AspNetCore.Mvc.Rendering;
    using Microsoft.AspNetCore.Mvc.ViewFeatures;
#line 1 "C:\Users\HP\source\repos\Chat\ChatApplication\Views\_ViewImports.cshtml"
using ChatApplication;

#line default
#line hidden
#line 2 "C:\Users\HP\source\repos\Chat\ChatApplication\Views\_ViewImports.cshtml"
using ChatApplication.Models;

#line default
#line hidden
#line 3 "C:\Users\HP\source\repos\Chat\ChatApplication\Views\_ViewImports.cshtml"
using ChatApplication.ViewModel;

#line default
#line hidden
#line 3 "C:\Users\HP\source\repos\Chat\ChatApplication\Views\Home\Dashboard.cshtml"
using Microsoft.AspNetCore.Identity;

#line default
#line hidden
#line 4 "C:\Users\HP\source\repos\Chat\ChatApplication\Views\Home\Dashboard.cshtml"
using ChatApplication.Areas.Identity.Data;

#line default
#line hidden
    [global::Microsoft.AspNetCore.Razor.Hosting.RazorSourceChecksumAttribute(@"SHA1", @"8f85602f4d333c64577ee9dc478caa775cb0acc6", @"/Views/Home/Dashboard.cshtml")]
    [global::Microsoft.AspNetCore.Razor.Hosting.RazorSourceChecksumAttribute(@"SHA1", @"f676a01b84d9e954b6068f571078b902beb72f8d", @"/Views/_ViewImports.cshtml")]
    public class Views_Home_Dashboard : global::Microsoft.AspNetCore.Mvc.Razor.RazorPage<HomeDashboardViewModel>
    {
        private static readonly global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute __tagHelperAttribute_0 = new global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute("asp-action", "FetchUser", global::Microsoft.AspNetCore.Razor.TagHelpers.HtmlAttributeValueStyle.DoubleQuotes);
        private static readonly global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute __tagHelperAttribute_1 = new global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute("asp-controller", "Home", global::Microsoft.AspNetCore.Razor.TagHelpers.HtmlAttributeValueStyle.DoubleQuotes);
        #line hidden
        #pragma warning disable 0169
        private string __tagHelperStringValueBuffer;
        #pragma warning restore 0169
        private global::Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperExecutionContext __tagHelperExecutionContext;
        private global::Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperRunner __tagHelperRunner = new global::Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperRunner();
        private global::Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperScopeManager __backed__tagHelperScopeManager = null;
        private global::Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperScopeManager __tagHelperScopeManager
        {
            get
            {
                if (__backed__tagHelperScopeManager == null)
                {
                    __backed__tagHelperScopeManager = new global::Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperScopeManager(StartTagHelperWritingScope, EndTagHelperWritingScope);
                }
                return __backed__tagHelperScopeManager;
            }
        }
        private global::Microsoft.AspNetCore.Mvc.TagHelpers.AnchorTagHelper __Microsoft_AspNetCore_Mvc_TagHelpers_AnchorTagHelper;
        private global::Microsoft.AspNetCore.Mvc.Razor.TagHelpers.UrlResolutionTagHelper __Microsoft_AspNetCore_Mvc_Razor_TagHelpers_UrlResolutionTagHelper;
        #pragma warning disable 1998
        public async override global::System.Threading.Tasks.Task ExecuteAsync()
        {
            BeginContext(31, 2, true);
            WriteLiteral("\r\n");
            EndContext();
            BeginContext(115, 2, true);
            WriteLiteral("\r\n");
            EndContext();
            BeginContext(171, 2, true);
            WriteLiteral("\r\n");
            EndContext();
#line 8 "C:\Users\HP\source\repos\Chat\ChatApplication\Views\Home\Dashboard.cshtml"
  
    ViewData["Title"] = "Dashboard";
    Layout = "~/Views/Shared/_Layout.cshtml";

#line default
#line hidden
            BeginContext(265, 27, true);
            WriteLiteral("\r\n<div class=\"container\">\r\n");
            EndContext();
            BeginContext(341, 334, true);
            WriteLiteral(@"    <div class=""messaging"">
        <div class=""inbox_msg"">
            <div class=""inbox_people"">
                <div class=""headind_srch"">
                    <div class=""recent_heading"">
                        <h4>All Users</h4>
                    </div>
                </div>
                <div class=""inbox_chat"">
");
            EndContext();
#line 24 "C:\Users\HP\source\repos\Chat\ChatApplication\Views\Home\Dashboard.cshtml"
                     foreach (var chatUser in Model.Users)
                    {

#line default
#line hidden
            BeginContext(758, 335, true);
            WriteLiteral(@"                        <div class=""chat_list"">
                            <div class=""chat_people"">
                                <div class=""chat_img""> <img src=""https://ptetutorials.com/images/user-profile.png"" alt=""UserImage""> </div>
                                <div class=""chat_ib"">
                                    ");
            EndContext();
            BeginContext(1093, 188, false);
            __tagHelperExecutionContext = __tagHelperScopeManager.Begin("a", global::Microsoft.AspNetCore.Razor.TagHelpers.TagMode.StartTagAndEndTag, "cc144806c0fc4fd4acf317393c0d4b6e", async() => {
                BeginContext(1173, 46, true);
                WriteLiteral("\r\n                                        <h5>");
                EndContext();
                BeginContext(1220, 14, false);
#line 31 "C:\Users\HP\source\repos\Chat\ChatApplication\Views\Home\Dashboard.cshtml"
                                       Write(chatUser.Email);

#line default
#line hidden
                EndContext();
                BeginContext(1234, 43, true);
                WriteLiteral("</h5>\r\n                                    ");
                EndContext();
            }
            );
            __Microsoft_AspNetCore_Mvc_TagHelpers_AnchorTagHelper = CreateTagHelper<global::Microsoft.AspNetCore.Mvc.TagHelpers.AnchorTagHelper>();
            __tagHelperExecutionContext.Add(__Microsoft_AspNetCore_Mvc_TagHelpers_AnchorTagHelper);
            if (__Microsoft_AspNetCore_Mvc_TagHelpers_AnchorTagHelper.RouteValues == null)
            {
                throw new InvalidOperationException(InvalidTagHelperIndexerAssignment("asp-route-UserId", "Microsoft.AspNetCore.Mvc.TagHelpers.AnchorTagHelper", "RouteValues"));
            }
            BeginWriteTagHelperAttribute();
#line 30 "C:\Users\HP\source\repos\Chat\ChatApplication\Views\Home\Dashboard.cshtml"
                                             WriteLiteral(chatUser.Id);

#line default
#line hidden
            __tagHelperStringValueBuffer = EndWriteTagHelperAttribute();
            __Microsoft_AspNetCore_Mvc_TagHelpers_AnchorTagHelper.RouteValues["UserId"] = __tagHelperStringValueBuffer;
            __tagHelperExecutionContext.AddTagHelperAttribute("asp-route-UserId", __Microsoft_AspNetCore_Mvc_TagHelpers_AnchorTagHelper.RouteValues["UserId"], global::Microsoft.AspNetCore.Razor.TagHelpers.HtmlAttributeValueStyle.DoubleQuotes);
            __Microsoft_AspNetCore_Mvc_TagHelpers_AnchorTagHelper.Action = (string)__tagHelperAttribute_0.Value;
            __tagHelperExecutionContext.AddTagHelperAttribute(__tagHelperAttribute_0);
            __Microsoft_AspNetCore_Mvc_TagHelpers_AnchorTagHelper.Controller = (string)__tagHelperAttribute_1.Value;
            __tagHelperExecutionContext.AddTagHelperAttribute(__tagHelperAttribute_1);
            await __tagHelperRunner.RunAsync(__tagHelperExecutionContext);
            if (!__tagHelperExecutionContext.Output.IsContentModified)
            {
                await __tagHelperExecutionContext.SetOutputContentAsync();
            }
            Write(__tagHelperExecutionContext.Output);
            __tagHelperExecutionContext = __tagHelperScopeManager.End();
            EndContext();
            BeginContext(1281, 8, true);
            WriteLiteral("&nbsp;\r\n");
            EndContext();
#line 33 "C:\Users\HP\source\repos\Chat\ChatApplication\Views\Home\Dashboard.cshtml"
                                     if ((Model.LastMessageBetweenTwoUser[chatUser.Id] != null) && 
                                        (@Model.LastMessageBetweenTwoUser[chatUser.Id].Body != null))
                                    {

#line default
#line hidden
            BeginContext(1532, 70, true);
            WriteLiteral("                                        <span class=\"chat_date\">Date: ");
            EndContext();
            BeginContext(1603, 73, false);
#line 36 "C:\Users\HP\source\repos\Chat\ChatApplication\Views\Home\Dashboard.cshtml"
                                                                 Write(Model.LastMessageBetweenTwoUser[chatUser.Id].DateSend.ToShortDateString());

#line default
#line hidden
            EndContext();
            BeginContext(1676, 66, true);
            WriteLiteral("</span>\r\n                                        <p>Last Message: ");
            EndContext();
            BeginContext(1743, 49, false);
#line 37 "C:\Users\HP\source\repos\Chat\ChatApplication\Views\Home\Dashboard.cshtml"
                                                    Write(Model.LastMessageBetweenTwoUser[chatUser.Id].Body);

#line default
#line hidden
            EndContext();
            BeginContext(1792, 6, true);
            WriteLiteral("</p>\r\n");
            EndContext();
#line 38 "C:\Users\HP\source\repos\Chat\ChatApplication\Views\Home\Dashboard.cshtml"
                                    }

#line default
#line hidden
            BeginContext(1837, 110, true);
            WriteLiteral("\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n");
            EndContext();
#line 43 "C:\Users\HP\source\repos\Chat\ChatApplication\Views\Home\Dashboard.cshtml"
                    }

#line default
#line hidden
            BeginContext(1970, 20, true);
            WriteLiteral("                    ");
            EndContext();
            BeginContext(2082, 2, true);
            WriteLiteral("\r\n");
            EndContext();
            BeginContext(2724, 77, true);
            WriteLiteral("                </div>\r\n            </div>\r\n            <div class=\"mesgs\">\r\n");
            EndContext();
#line 59 "C:\Users\HP\source\repos\Chat\ChatApplication\Views\Home\Dashboard.cshtml"
                 if (Model.ReceiverUser != null)
                {

#line default
#line hidden
            BeginContext(2870, 24, true);
            WriteLiteral("                    <h5>");
            EndContext();
            BeginContext(2895, 27, false);
#line 61 "C:\Users\HP\source\repos\Chat\ChatApplication\Views\Home\Dashboard.cshtml"
                   Write(Model.ReceiverUser.UserName);

#line default
#line hidden
            EndContext();
            BeginContext(2922, 63, true);
            WriteLiteral("</h5>\r\n                    <div class=\"msg_history\" id=\"msg\">\r\n");
            EndContext();
#line 63 "C:\Users\HP\source\repos\Chat\ChatApplication\Views\Home\Dashboard.cshtml"
                         foreach (var msg in Model.MessagesBetween)
                        {
                            

#line default
#line hidden
#line 65 "C:\Users\HP\source\repos\Chat\ChatApplication\Views\Home\Dashboard.cshtml"
                             if (msg.SenderUserID != ViewBag.loginUser)
                            {

#line default
#line hidden
            BeginContext(3185, 450, true);
            WriteLiteral(@"                                <div class=""incoming_msg"">
                                    <!--<div class=""incoming_msg_img""> <img src=""https://ptetutorials.com/images/user-profile.png"" alt=""sunil""> </div>-->
                                    <div class=""received_msg"">
                                        <div class=""received_withd_msg"">
                                            <p>
                                                ");
            EndContext();
            BeginContext(3636, 8, false);
#line 72 "C:\Users\HP\source\repos\Chat\ChatApplication\Views\Home\Dashboard.cshtml"
                                           Write(msg.Body);

#line default
#line hidden
            EndContext();
            BeginContext(3644, 121, true);
            WriteLiteral("\r\n                                            </p>\r\n                                            <span class=\"time_date\"> ");
            EndContext();
            BeginContext(3766, 12, false);
#line 74 "C:\Users\HP\source\repos\Chat\ChatApplication\Views\Home\Dashboard.cshtml"
                                                                Write(msg.DateSend);

#line default
#line hidden
            EndContext();
            BeginContext(3778, 141, true);
            WriteLiteral("</span>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n");
            EndContext();
#line 78 "C:\Users\HP\source\repos\Chat\ChatApplication\Views\Home\Dashboard.cshtml"
                            }
                            else
                            {

#line default
#line hidden
            BeginContext(4015, 209, true);
            WriteLiteral("                                <div class=\"outgoing_msg\">\r\n                                    <div class=\"sent_msg\">\r\n                                        <p>\r\n                                            ");
            EndContext();
            BeginContext(4225, 8, false);
#line 84 "C:\Users\HP\source\repos\Chat\ChatApplication\Views\Home\Dashboard.cshtml"
                                       Write(msg.Body);

#line default
#line hidden
            EndContext();
            BeginContext(4233, 113, true);
            WriteLiteral("\r\n                                        </p>\r\n                                        <span class=\"time_date\"> ");
            EndContext();
            BeginContext(4347, 12, false);
#line 86 "C:\Users\HP\source\repos\Chat\ChatApplication\Views\Home\Dashboard.cshtml"
                                                            Write(msg.DateSend);

#line default
#line hidden
            EndContext();
            BeginContext(4359, 93, true);
            WriteLiteral("</span>\r\n                                    </div>\r\n                                </div>\r\n");
            EndContext();
#line 89 "C:\Users\HP\source\repos\Chat\ChatApplication\Views\Home\Dashboard.cshtml"
                            }

#line default
#line hidden
#line 89 "C:\Users\HP\source\repos\Chat\ChatApplication\Views\Home\Dashboard.cshtml"
                             
                        }

#line default
#line hidden
            BeginContext(4510, 626, true);
            WriteLiteral(@"                    </div>
                    <div class=""type_msg"">
                        <div class=""input_msg_write"">
                            <input type=""text"" class=""write_msg"" id=""txtmessage"" placeholder=""Type a message"" required />
                            <button class=""msg_send_btn"" id=""sendBtn"" type=""button"">
                                <i class=""fas fa-paper-plane"" aria-hidden=""true""></i>
                            </button>
                        </div>
                        
                    </div>
                    <!--<input type=""button"" id=""sendBtn"" value=""Send"" />-->
");
            EndContext();
#line 102 "C:\Users\HP\source\repos\Chat\ChatApplication\Views\Home\Dashboard.cshtml"
                }

#line default
#line hidden
            BeginContext(5155, 24, true);
            WriteLiteral("                <!--<h5>");
            EndContext();
            BeginContext(5180, 95, true);
            WriteLiteral("@sModel.ReceiverUser.UserName</h5>-->\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n");
            EndContext();
            BeginContext(5275, 73, false);
            __tagHelperExecutionContext = __tagHelperScopeManager.Begin("script", global::Microsoft.AspNetCore.Razor.TagHelpers.TagMode.StartTagAndEndTag, "2d08a2dca6114daeb2f36ef6c9a2da1c", async() => {
            }
            );
            __Microsoft_AspNetCore_Mvc_Razor_TagHelpers_UrlResolutionTagHelper = CreateTagHelper<global::Microsoft.AspNetCore.Mvc.Razor.TagHelpers.UrlResolutionTagHelper>();
            __tagHelperExecutionContext.Add(__Microsoft_AspNetCore_Mvc_Razor_TagHelpers_UrlResolutionTagHelper);
            BeginWriteTagHelperAttribute();
            WriteLiteral("~/lib/@");
            WriteLiteral("microsoft/signalr/dist/browser/signalr.js");
            __tagHelperStringValueBuffer = EndWriteTagHelperAttribute();
            __tagHelperExecutionContext.AddHtmlAttribute("src", Html.Raw(__tagHelperStringValueBuffer), global::Microsoft.AspNetCore.Razor.TagHelpers.HtmlAttributeValueStyle.DoubleQuotes);
            await __tagHelperRunner.RunAsync(__tagHelperExecutionContext);
            if (!__tagHelperExecutionContext.Output.IsContentModified)
            {
                await __tagHelperExecutionContext.SetOutputContentAsync();
            }
            Write(__tagHelperExecutionContext.Output);
            __tagHelperExecutionContext = __tagHelperScopeManager.End();
            EndContext();
            BeginContext(5348, 372, true);
            WriteLiteral(@"
<script>
    var connection = new signalR.HubConnectionBuilder().withUrl(""/Dashboard"").build();

//Disable send button until connection is established  

    connection.on(""ReceiveMessage"", function (userid, message,isRight) {
        var msg = message.replace(/&/g, ""&"").replace(/</g, ""<"").replace(/>/g, "">"");
        var encodedMsg = msg;
        var recId = """);
            EndContext();
            BeginContext(5721, 18, false);
#line 117 "C:\Users\HP\source\repos\Chat\ChatApplication\Views\Home\Dashboard.cshtml"
                Write(ViewBag.receiverId);

#line default
#line hidden
            EndContext();
            BeginContext(5739, 2290, true);
            WriteLiteral(@""";
        var d = new Date();
        if (!isRight) {
            var incoming = document.createElement(""div"");
            var receivemsg = document.createElement(""div"");
            var receivedwithmsg = document.createElement(""div"");
            var date = document.createElement(""span"");
            date.classList.add(""time_date"");
            date.textContent = d.toDateString();
            var msg = document.createElement(""p"");
            msg.textContent = encodedMsg;
            incoming.classList.add(""incoming_msg"");
            receivemsg.classList.add(""received_msg"");
            receivedwithmsg.classList.add(""received_withd_msg"");
            receivedwithmsg.appendChild(msg);
            receivedwithmsg.appendChild(date);
            receivemsg.appendChild(receivedwithmsg);
            incoming.appendChild(receivemsg);
            document.getElementById(""msg"").appendChild(incoming);
        }
        else {
            var outgoing = document.createElement(""div"");
          ");
            WriteLiteral(@"  var sentmsg = document.createElement(""div"");
            var date = document.createElement(""span"");
            date.textContent = d.toDateString();
            date.classList.add(""time_date"");
            var msg = document.createElement(""p"");
            msg.textContent = encodedMsg;
            sentmsg.classList.add(""sent_msg"");
            outgoing.classList.add(""outgoing_msg"");
            sentmsg.appendChild(msg);
            sentmsg.appendChild(date);
            outgoing.appendChild(sentmsg);
            document.getElementById(""msg"").appendChild(outgoing);
        }
        /*var li = document.createElement(""li"");
        li.textContent = encodedMsg;
        document.getElementById(""ulmessages"").appendChild(li);*/
    });

    connection.start().then(function () {
        document.getElementById(""sendBtn"").disabled = false;
    }).catch(function (err) {
        return console.error(err.toString());
    });

    document.getElementById(""sendBtn"").addEventListener(""click"", fun");
            WriteLiteral("ction (message) {\r\n        if (document.getElementById(\"txtmessage\").value != \"\") {\r\n            var message = document.getElementById(\"txtmessage\").value;\r\n            document.getElementById(\"txtmessage\").value = \"\";\r\n            var id = \"");
            EndContext();
            BeginContext(8030, 18, false);
#line 167 "C:\Users\HP\source\repos\Chat\ChatApplication\Views\Home\Dashboard.cshtml"
                 Write(ViewBag.receiverId);

#line default
#line hidden
            EndContext();
            BeginContext(8048, 215, true);
            WriteLiteral("\";\r\n            connection.invoke(\"SendMessage\", message, id).catch(function (err) {\r\n                return console.error(err);\r\n            });\r\n            event.preventDefault();\r\n        }\r\n    });\r\n</script>\r\n");
            EndContext();
        }
        #pragma warning restore 1998
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public UserManager<ChatApplicationUser> UserManager { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.ViewFeatures.IModelExpressionProvider ModelExpressionProvider { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.IUrlHelper Url { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.IViewComponentHelper Component { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.Rendering.IJsonHelper Json { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.Rendering.IHtmlHelper<HomeDashboardViewModel> Html { get; private set; }
    }
}
#pragma warning restore 1591
